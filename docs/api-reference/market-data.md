# è¡Œæƒ…æ•°æ®API

> ðŸ“– **å¯¼èˆª**: [APIæ–‡æ¡£ä¸»é¡µ](README.md) | [è‚¡ç¥¨äº¤æ˜“](stock-trading.md) | [æŠ€æœ¯æŒ‡æ ‡](technical-indicators.md) | [è‚¡ç¥¨ä¿¡æ¯](stock-info.md)

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº†ç”¨äºŽèŽ·å–å„ç±»è¡Œæƒ…æ•°æ®çš„APIå‡½æ•°ï¼ŒåŒ…æ‹¬åŽ†å²Kçº¿ã€å®žæ—¶å¿«ç…§ã€ä»¥åŠL2çº§åˆ«çš„é€ç¬”å’Œåˆ†æ—¶æ•°æ®ã€‚

---

## åŽ†å²è¡Œæƒ…

### `get_history()`

```python
get_history(count, frequency='1d', field='close', security_list=None, fq=None, include=False, fill='nan', is_dict=False)
```

-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–æœ€è¿‘ `count` ä¸ªå‘¨æœŸçš„åŽ†å²è¡Œæƒ…Kçº¿æ•°æ®ã€‚æ”¯æŒå¤šæ ‡çš„ã€å¤šå­—æ®µèŽ·å–ã€‚
-   **æ³¨æ„äº‹é¡¹**:
    -   åªèƒ½èŽ·å–2005å¹´ä¹‹åŽçš„æ•°æ®ã€‚
    -   åœç‰Œæ—¥çš„å¤„ç†ï¼šè¿”å›žçš„æ•°æ®ä¼šåŒ…å«åœç‰Œæ—¥ï¼Œä»·æ ¼ä½¿ç”¨åœç‰Œå‰çš„æ•°æ®å¡«å……ï¼Œæˆäº¤é‡ä¸º0ã€‚
    -   è¯¥æŽ¥å£ä¸Ž `get_price()` ä¸æ”¯æŒåœ¨å¤šçº¿ç¨‹ä¸­åŒæ—¶è°ƒç”¨ã€‚
-   **å‚æ•°**:
    -   `count` (int): Kçº¿æ•°é‡ï¼Œå¿…å¡«ã€‚
    -   `frequency` (str): Kçº¿å‘¨æœŸï¼Œæ”¯æŒ '1m', '5m', '15m', '30m', '60m', '120m', '1d', '1w', 'mo', '1q', '1y'ã€‚é»˜è®¤ä¸º `'1d'`ã€‚
    -   `field` (str or list): è¡Œæƒ…å­—æ®µï¼Œå¦‚ 'open', 'high', 'low', 'close', 'volume', 'money' ç­‰ã€‚é»˜è®¤ä¸º `['open','high','low','close','volume','money','price']`ã€‚
    -   `security_list` (str or list): è¯åˆ¸ä»£ç ã€‚é»˜è®¤ä¸º `set_universe()` è®¾ç½®çš„è‚¡ç¥¨æ± ã€‚
    -   `fq` (str): å¤æƒé€‰é¡¹ï¼Œ'pre'-å‰å¤æƒ, 'post'-åŽå¤æƒ, 'dypre'-åŠ¨æ€å‰å¤æƒ, `None`-ä¸å¤æƒã€‚
    -   `include` (bool): æ˜¯å¦åŒ…å«å½“å‰æœªç»“æŸçš„å‘¨æœŸã€‚é»˜è®¤ä¸º `False`ã€‚
    -   `fill` (str): åˆ†é’Ÿæ•°æ®ç¼ºå¤±æ—¶çš„å¡«å……æ–¹å¼ï¼Œ'pre'-ç”¨ä¸Šä¸€åˆ†é’Ÿæ•°æ®å¡«å……, 'nan'-å¡«å……NaNã€‚é»˜è®¤ä¸º `'nan'`ã€‚
    -   `is_dict` (bool): æ˜¯å¦è¿”å›žå­—å…¸æ ¼å¼ï¼Œå¯ä»¥æå‡èŽ·å–é€Ÿåº¦ã€‚é»˜è®¤ä¸º `False`ã€‚
-   **è¿”å›ž**: `pandas.DataFrame`, `pandas.Panel` æˆ– `dict`ï¼Œå…·ä½“æ ¼å¼å–å†³äºŽè¾“å…¥å‚æ•°ã€‚

### `get_price()`

```python
get_price(security, start_date=None, end_date=None, frequency='1d', fields=None, fq=None, count=None, is_dict=False)
```

-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–æŒ‡å®šæ—¶é—´èŒƒå›´æˆ–æŒ‡å®šæ¡æ•°çš„åŽ†å²è¡Œæƒ…Kçº¿æ•°æ®ã€‚
-   **æ³¨æ„äº‹é¡¹**:
    -   `start_date` å’Œ `count` å‚æ•°äº’æ–¥ï¼Œå¿…é¡»ä¸”åªèƒ½ä½¿ç”¨ä¸€ä¸ªã€‚
    -   è¿”å›žæ•°æ®ä¸åŒ…å« `end_date` å½“å¤©ã€‚
-   **å‚æ•°**:
    -   `security` (str or list): è¯åˆ¸ä»£ç ã€‚
    -   `start_date` (str): å¼€å§‹æ—¥æœŸã€‚
    -   `end_date` (str): ç»“æŸæ—¥æœŸã€‚
    -   `count` (int): ä»Ž `end_date` å¾€å‰æŽ¨ç®—çš„Kçº¿æ•°é‡ã€‚
    -   å…¶ä»–å‚æ•°ä¸Ž `get_history()` ç›¸åŒã€‚
-   **è¿”å›ž**: ä¸Ž `get_history()` ç±»ä¼¼ï¼Œè¿”å›ž `pandas.DataFrame`, `pandas.Panel` æˆ– `dict`ã€‚

---

## å®žæ—¶è¡Œæƒ…

### `get_snapshot()`

```python
get_snapshot(security)
```

-   **ä½¿ç”¨åœºæ™¯**: ä»…äº¤æ˜“æ¨¡å—å¯ç”¨ã€‚
-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–æŒ‡å®šè¯åˆ¸çš„å®žæ—¶è¡Œæƒ…å¿«ç…§ã€‚
-   **è¿”å›ž**: ä¸€ä¸ªå­—å…¸ï¼Œkeyä¸ºè¯åˆ¸ä»£ç ï¼Œvalueä¸ºåŒ…å«è¯¥è¯åˆ¸æ‰€æœ‰å¿«ç…§ä¿¡æ¯çš„å­—å…¸ï¼Œå¦‚ `last_px`, `open_px`, `high_px`, `low_px`, `bid_grp`, `offer_grp` ç­‰ã€‚

---

## L2 è¡Œæƒ… (éœ€å¼€é€šLevel-2æƒé™)

### `get_individual_entrust()` - é€ç¬”å§”æ‰˜

```python
get_individual_entrust(stocks=None, data_count=50, start_pos=0, search_direction=1, is_dict=False)
```

-   **ä½¿ç”¨åœºæ™¯**: ä»…äº¤æ˜“æ¨¡å—å¯ç”¨ã€‚
-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–å½“æ—¥çš„é€ç¬”å§”æ‰˜è¡Œæƒ…æ•°æ®ã€‚
-   **å‚æ•°**:
    -   `stocks` (list): è¯åˆ¸ä»£ç åˆ—è¡¨ã€‚
    -   `data_count` (int): èŽ·å–çš„æ•°æ®æ¡æ•°ï¼Œæœ€å¤§200ã€‚
-   **è¿”å›ž**: `dict` æˆ– `pandas.Panel`ã€‚

### `get_individual_transaction()` - é€ç¬”æˆäº¤

```python
get_individual_transaction(stocks=None, data_count=50, start_pos=0, search_direction=1, is_dict=False)
```

-   **ä½¿ç”¨åœºæ™¯**: ä»…äº¤æ˜“æ¨¡å—å¯ç”¨ã€‚
-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–å½“æ—¥çš„é€ç¬”æˆäº¤è¡Œæƒ…æ•°æ®ã€‚
-   **å‚æ•°**:
    -   `stocks` (list): è¯åˆ¸ä»£ç åˆ—è¡¨ã€‚
    -   `data_count` (int): èŽ·å–çš„æ•°æ®æ¡æ•°ï¼Œæœ€å¤§200ã€‚
-   **è¿”å›ž**: `dict` æˆ– `pandas.Panel`ã€‚

### `get_tick_direction()` - åˆ†æ—¶æˆäº¤

```python
get_tick_direction(symbols=None, query_date=0, start_pos=0, search_direction=1, data_count=50)
```

-   **ä½¿ç”¨åœºæ™¯**: ä»…äº¤æ˜“æ¨¡å—å¯ç”¨ã€‚
-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–å½“æ—¥çš„åˆ†æ—¶æˆäº¤è¡Œæƒ…æ•°æ®ã€‚
-   **è¿”å›ž**: `OrderedDict`ï¼ŒåŒ…å«æ¯åªä»£ç çš„åˆ†æ—¶æˆäº¤è¡Œæƒ…ã€‚

---

## å…¶ä»–è¡Œæƒ…

### `get_gear_price()` - æ¡£ä½è¡Œæƒ…

```python
get_gear_price(sids)
```

-   **ä½¿ç”¨åœºæ™¯**: ä»…äº¤æ˜“æ¨¡å—å¯ç”¨ã€‚
-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–æŒ‡å®šä»£ç çš„ä¹°å–ç›˜æ¡£ä½è¡Œæƒ…ä»·æ ¼ã€‚
-   **è¿”å›ž**: å­—å…¸ï¼ŒåŒ…å« `bid_grp` (å§”ä¹°æ¡£ä½) å’Œ `offer_grp` (å§”å–æ¡£ä½) ä¿¡æ¯ã€‚

### `get_sort_msg()` - æ¿å—/è¡Œä¸šæŽ’å

```python
get_sort_msg(sort_type_grp=None, sort_field_name=None, sort_type=1, data_count=100)
```

-   **ä½¿ç”¨åœºæ™¯**: ä»…äº¤æ˜“æ¨¡å—å¯ç”¨ã€‚
-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–æ¿å—æˆ–è¡Œä¸šçš„æ¶¨è·Œå¹…æŽ’åã€‚
-   **å‚æ•°**:
    -   `sort_type_grp` (str): æ¿å—æˆ–è¡Œä¸šä»£ç  (å¦‚ 'XBHS.DY', 'XBHS.GN')ã€‚
    -   `sort_field_name` (str): æŽ’åºå­—æ®µï¼Œå¦‚ 'px_change_rate' (æ¶¨è·Œå¹…)ã€‚
    -   `sort_type` (int): æŽ’åºæ–¹å¼ï¼Œ0-å‡åº, 1-é™åºã€‚
-   **è¿”å›ž**: åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªåŒ…å«æŽ’åä¿¡æ¯çš„å­—å…¸ã€‚

---

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [**è‚¡ç¥¨äº¤æ˜“API**](stock-trading.md) - ä½¿ç”¨è¡Œæƒ…æ•°æ®è¿›è¡Œäº¤æ˜“å†³ç­–
- [**æŠ€æœ¯æŒ‡æ ‡API**](technical-indicators.md) - åŸºäºŽè¡Œæƒ…æ•°æ®è®¡ç®—æŠ€æœ¯æŒ‡æ ‡
- [**è‚¡ç¥¨ä¿¡æ¯API**](stock-info.md) - èŽ·å–è‚¡ç¥¨åŸºæœ¬ä¿¡æ¯å’Œè´¢åŠ¡æ•°æ®
- [**è´¢åŠ¡æ•°æ®API**](financial-data.md) - èŽ·å–è¯¦ç»†çš„è´¢åŠ¡æŠ¥è¡¨æ•°æ®
- [**åŸºç¡€ä¿¡æ¯API**](basic-info.md) - äº¤æ˜“æ—¥åŽ†ã€è‚¡ç¥¨åˆ—è¡¨ç­‰åŸºç¡€æ•°æ®

> ðŸ”™ **è¿”å›ž**: [APIæ–‡æ¡£ä¸»é¡µ](README.md) | [å®Œæ•´APIåˆ†ç±»](../api-classification.md)
