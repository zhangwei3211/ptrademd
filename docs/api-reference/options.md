# æœŸæƒäº¤æ˜“API

> ðŸ“– **å¯¼èˆª**: [APIæ–‡æ¡£ä¸»é¡µ](README.md) | [è‚¡ç¥¨äº¤æ˜“](stock-trading.md) | [æœŸè´§äº¤æ˜“](futures.md) | [è¡Œæƒ…æ•°æ®](market-data.md)

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº† Ptrade å¹³å°ä¸­ç”¨äºŽæœŸæƒäº¤æ˜“çš„å„ç±»APIå‡½æ•°ï¼ŒåŒ…æ‹¬åˆçº¦æŸ¥è¯¢ã€äº¤æ˜“ä¸‹å•ã€å¤‡å…‘å’Œè¡Œæƒç­‰åŠŸèƒ½ã€‚

---

## æŸ¥è¯¢å‡½æ•°

### `get_opt_objects()` - èŽ·å–æœŸæƒæ ‡çš„åˆ—è¡¨

-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–æŒ‡å®šäº¤æ˜“æ—¥çš„æ‰€æœ‰ETFæœŸæƒæ ‡çš„åˆ—è¡¨ã€‚
-   **å‚æ•°**:
    -   `date` (str, optional): æŸ¥è¯¢æ—¥æœŸï¼Œæ ¼å¼ `YYYY-MM-DD` æˆ– `YYYYMMDD`ã€‚é»˜è®¤ä¸ºå½“å‰æ—¥æœŸã€‚
-   **è¿”å›ž**: `list[str]`ï¼ŒåŒ…å«æœŸæƒæ ‡çš„è¯åˆ¸ä»£ç çš„åˆ—è¡¨ã€‚

### `get_opt_last_dates()` - èŽ·å–åˆçº¦åˆ°æœŸæ—¥

-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–æŒ‡å®šæœŸæƒæ ‡çš„åœ¨ç‰¹å®šäº¤æ˜“æ—¥çš„æ‰€æœ‰æŒ‚ç‰Œåˆçº¦çš„åˆ°æœŸæ—¥ã€‚
-   **å‚æ•°**:
    -   `security` (str): æœŸæƒæ ‡çš„è¯åˆ¸ä»£ç ï¼Œå¦‚ `'510050.SS'`ã€‚
    -   `date` (str, optional): æŸ¥è¯¢æ—¥æœŸã€‚é»˜è®¤ä¸ºå½“å‰æ—¥æœŸã€‚
-   **è¿”å›ž**: `list[str]`ï¼ŒåŒ…å«æ‰€æœ‰åˆ°æœŸæ—¥çš„åˆ—è¡¨ï¼Œæ ¼å¼ä¸º `YYYY-MM-DD`ã€‚

### `get_opt_contracts()` - èŽ·å–åˆçº¦åˆ—è¡¨

-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–æŒ‡å®šæœŸæƒæ ‡çš„åœ¨ç‰¹å®šäº¤æ˜“æ—¥çš„æ‰€æœ‰æŒ‚ç‰Œåˆçº¦ä»£ç ã€‚
-   **å‚æ•°**:
    -   `security` (str): æœŸæƒæ ‡çš„è¯åˆ¸ä»£ç ã€‚
    -   `date` (str, optional): æŸ¥è¯¢æ—¥æœŸã€‚é»˜è®¤ä¸ºå½“å‰æ—¥æœŸã€‚
-   **è¿”å›ž**: `list[str]`ï¼ŒåŒ…å«æ‰€æœ‰åˆçº¦ä»£ç çš„åˆ—è¡¨ã€‚

### `get_contract_info()` - èŽ·å–åˆçº¦ä¿¡æ¯

-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–å•ä¸ªæœŸæƒåˆçº¦çš„è¯¦ç»†ä¿¡æ¯ã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸæƒåˆçº¦ä»£ç ï¼Œå¦‚ `'10003975.XSHO'`ã€‚
-   **è¿”å›ž**: `dict`ï¼ŒåŒ…å«åˆçº¦çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ `contract_name`, `option_type` (C/P), `exercise_price`, `expiration_date` ç­‰ã€‚

---

## äº¤æ˜“å‡½æ•°

### `buy_open()` - æƒåˆ©ä»“å¼€ä»“ (ä¹°å…¥å¼€ä»“)

-   **æŽ¥å£è¯´æ˜Ž**: ä¹°å…¥æœŸæƒï¼Œå»ºç«‹æƒåˆ©ä»“ã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸæƒåˆçº¦ä»£ç ã€‚
    -   `amount` (int): äº¤æ˜“æ•°é‡ï¼ˆå¼ ï¼‰ã€‚
    -   `limit_price` (float, optional): é™ä»·ã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

### `sell_close()` - æƒåˆ©ä»“å¹³ä»“ (å–å‡ºå¹³ä»“)

-   **æŽ¥å£è¯´æ˜Ž**: å–å‡ºæŒæœ‰çš„æœŸæƒï¼Œäº†ç»“æƒåˆ©ä»“ã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸæƒåˆçº¦ä»£ç ã€‚
    -   `amount` (int): äº¤æ˜“æ•°é‡ï¼ˆå¼ ï¼‰ã€‚
    -   `limit_price` (float, optional): é™ä»·ã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

### `sell_open()` - ä¹‰åŠ¡ä»“å¼€ä»“ (å–å‡ºå¼€ä»“)

-   **æŽ¥å£è¯´æ˜Ž**: å–å‡ºæœŸæƒï¼Œå»ºç«‹ä¹‰åŠ¡ä»“ã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸæƒåˆçº¦ä»£ç ã€‚
    -   `amount` (int): äº¤æ˜“æ•°é‡ï¼ˆå¼ ï¼‰ã€‚
    -   `limit_price` (float, optional): é™ä»·ã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

### `buy_close()` - ä¹‰åŠ¡ä»“å¹³ä»“ (ä¹°å…¥å¹³ä»“)

-   **æŽ¥å£è¯´æ˜Ž**: ä¹°å…¥æœŸæƒï¼Œäº†ç»“ä¹‰åŠ¡ä»“ã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸæƒåˆçº¦ä»£ç ã€‚
    -   `amount` (int): äº¤æ˜“æ•°é‡ï¼ˆå¼ ï¼‰ã€‚
    -   `limit_price` (float, optional): é™ä»·ã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

---

## å¤‡å…‘ä¸Žè¡Œæƒ

### `open_prepared()` - å¤‡å…‘å¼€ä»“

-   **æŽ¥å£è¯´æ˜Ž**: åœ¨æŒæœ‰è¶³é¢æ ‡çš„è¯åˆ¸çš„å‰æä¸‹ï¼Œå–å‡ºå¯¹åº”çš„è®¤è´­æœŸæƒã€‚
-   **æ³¨æ„äº‹é¡¹**: ä»…æ”¯æŒä¸Šäº¤æ‰€ETFè®¤è´­æœŸæƒã€‚
-   **å‚æ•°**:
    -   `contract` (str): è®¤è´­æœŸæƒåˆçº¦ä»£ç ã€‚
    -   `amount` (int): äº¤æ˜“æ•°é‡ï¼ˆå¼ ï¼‰ã€‚
    -   `limit_price` (float, optional): é™ä»·ã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

### `close_prepared()` - å¤‡å…‘å¹³ä»“

-   **æŽ¥å£è¯´æ˜Ž**: ä¹°å…¥ä¹‹å‰å¤‡å…‘å¼€ä»“çš„è®¤è´­æœŸæƒï¼Œäº†ç»“å¤‡å…‘ä»“ä½ã€‚
-   **å‚æ•°**:
    -   `contract` (str): è®¤è´­æœŸæƒåˆçº¦ä»£ç ã€‚
    -   `amount` (int): äº¤æ˜“æ•°é‡ï¼ˆå¼ ï¼‰ã€‚
    -   `limit_price` (float, optional): é™ä»·ã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

### `option_covered_lock()` / `option_covered_unlock()` - å¤‡å…‘é”å®š/è§£é”

-   **`option_covered_lock(code, amount)`**: é”å®šçŽ°è´§è´¦æˆ·ä¸­æŒ‡å®šæ•°é‡çš„ETFï¼Œç”¨äºŽå¤‡å…‘å¼€ä»“ã€‚
-   **`option_covered_unlock(code, amount)`**: è§£é”å·²å¤‡å…‘é”å®šçš„ETFã€‚
-   **æ³¨æ„äº‹é¡¹**: ä»…æ”¯æŒä¸Šäº¤æ‰€ETFæœŸæƒæ ‡çš„ã€‚

### `option_exercise()` - è¡Œæƒ

-   **æŽ¥å£è¯´æ˜Ž**: åœ¨æœŸæƒåˆ°æœŸæ—¥ï¼Œå¯¹æŒæœ‰çš„ä»·å†…æœŸæƒæ‰§è¡Œè¡Œæƒæ“ä½œã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸæƒåˆçº¦ä»£ç ã€‚
    -   `amount` (int): è¡Œæƒæ•°é‡ï¼ˆå¼ ï¼‰ã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

---

## æ³¨æ„äº‹é¡¹

1.  **æƒé™è¦æ±‚**: æœŸæƒäº¤æ˜“éœ€è¦å¼€é€šç›¸åº”æƒé™ã€‚
2.  **ä¿è¯é‡‘**: å–å‡ºæœŸæƒï¼ˆä¹‰åŠ¡ä»“ã€å¤‡å…‘ä»“ï¼‰éœ€è¦ç¼´çº³ä¿è¯é‡‘ã€‚
3.  **åˆ°æœŸæ—¥**: åŠ¡å¿…å…³æ³¨åˆçº¦çš„åˆ°æœŸæ—¥å’Œæœ€åŽäº¤æ˜“æ—¥ï¼ŒåŠæ—¶å¤„ç†æŒä»“ã€‚
4.  **é£Žé™©**: æœŸæƒäº¤æ˜“å…·æœ‰é«˜æ æ†æ€§ï¼Œé£Žé™©è¾ƒå¤§ï¼Œè¯·åŠ¡å¿…å……åˆ†äº†è§£ç›¸å…³è§„åˆ™ã€‚

---

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [**è‚¡ç¥¨äº¤æ˜“API**](stock-trading.md) - çŽ°è´§äº¤æ˜“åŸºç¡€ï¼ŒæœŸæƒæ ‡çš„è‚¡ç¥¨äº¤æ˜“
- [**æœŸè´§äº¤æ˜“API**](futures.md) - è¡ç”Ÿå“äº¤æ˜“çš„å¦ä¸€ç§å½¢å¼
- [**è¡Œæƒ…æ•°æ®API**](market-data.md) - èŽ·å–æœŸæƒä»·æ ¼å’Œå¸Œè…Šå­—æ¯æ•°æ®
- [**æ•°æ®å¯¹è±¡å®šä¹‰**](objects.md) - æœŸæƒç›¸å…³çš„Positionã€Orderå¯¹è±¡å­—æ®µ
- [**ç­–ç•¥ç¤ºä¾‹**](../examples.md) - æœŸæƒäº¤æ˜“ç­–ç•¥ç¤ºä¾‹

> ðŸ”™ **è¿”å›ž**: [APIæ–‡æ¡£ä¸»é¡µ](README.md) | [å®Œæ•´APIåˆ†ç±»](../api-classification.md)
