# æœŸè´§äº¤æ˜“API

> ðŸ“– **å¯¼èˆª**: [APIæ–‡æ¡£ä¸»é¡µ](README.md) | [è‚¡ç¥¨äº¤æ˜“](stock-trading.md) | [æœŸæƒäº¤æ˜“](options.md) | [è¡Œæƒ…æ•°æ®](market-data.md)

æœ¬æ–‡æ¡£è¯¦ç»†ä»‹ç»äº† Ptrade å¹³å°ä¸­ç”¨äºŽæœŸè´§äº¤æ˜“çš„APIå‡½æ•°ï¼ŒåŒ…æ‹¬å¼€å¹³ä»“ã€è®¾ç½®å’ŒæŸ¥è¯¢ç­‰åŠŸèƒ½ã€‚

---

## äº¤æ˜“å‡½æ•°

### `buy_open()` - å¤šå¤´å¼€ä»“

-   **æŽ¥å£è¯´æ˜Ž**: ä¹°å…¥å¼€ä»“ã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸè´§åˆçº¦ä»£ç ã€‚
    -   `amount` (int): äº¤æ˜“æ•°é‡ï¼ˆæ‰‹æ•°ï¼Œæ­£æ•°ï¼‰ã€‚
    -   `limit_price` (float, optional): é™ä»·ã€‚è‹¥ä¸æŒ‡å®šï¼Œåˆ™æŒ‰å¸‚ä»·å§”æ‰˜ã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

### `sell_close()` - å¤šå¤´å¹³ä»“

-   **æŽ¥å£è¯´æ˜Ž**: å–å‡ºå¹³ä»“ã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸè´§åˆçº¦ä»£ç ã€‚
    -   `amount` (int): äº¤æ˜“æ•°é‡ï¼ˆæ‰‹æ•°ï¼Œæ­£æ•°ï¼‰ã€‚
    -   `limit_price` (float, optional): é™ä»·ã€‚
    -   `close_today` (bool): æ˜¯å¦å¹³ä»Šä»“ã€‚`True` ä¸ºä»…å¹³ä»Šä»“ï¼Œ`False` (é»˜è®¤) ä¸ºä¼˜å…ˆå¹³æ˜¨ä»“ã€‚æ­¤å‚æ•°ä»…å¯¹ä¸Šæµ·æœŸè´§äº¤æ˜“æ‰€ç”Ÿæ•ˆã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

### `sell_open()` - ç©ºå¤´å¼€ä»“

-   **æŽ¥å£è¯´æ˜Ž**: å–å‡ºå¼€ä»“ã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸè´§åˆçº¦ä»£ç ã€‚
    -   `amount` (int): äº¤æ˜“æ•°é‡ï¼ˆæ‰‹æ•°ï¼Œæ­£æ•°ï¼‰ã€‚
    -   `limit_price` (float, optional): é™ä»·ã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

### `buy_close()` - ç©ºå¤´å¹³ä»“

-   **æŽ¥å£è¯´æ˜Ž**: ä¹°å…¥å¹³ä»“ã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸè´§åˆçº¦ä»£ç ã€‚
    -   `amount` (int): äº¤æ˜“æ•°é‡ï¼ˆæ‰‹æ•°ï¼Œæ­£æ•°ï¼‰ã€‚
    -   `limit_price` (float, optional): é™ä»·ã€‚
    -   `close_today` (bool): æ˜¯å¦å¹³ä»Šä»“ï¼Œè§„åˆ™åŒ `sell_close()`ã€‚
-   **è¿”å›ž**: `Order` å¯¹è±¡çš„ `id` (str) æˆ– `None`ã€‚

---

## è®¾ç½®å‡½æ•°

### `set_future_commission()` - è®¾ç½®æ‰‹ç»­è´¹

-   **ä½¿ç”¨åœºæ™¯**: ä»…å›žæµ‹æ¨¡å—å¯ç”¨ã€‚
-   **æŽ¥å£è¯´æ˜Ž**: æŒ‰äº¤æ˜“ä»£ç è®¾ç½®æœŸè´§çš„æ‰‹ç»­è´¹ã€‚
-   **å‚æ•°**:
    -   `transaction_code` (str): æœŸè´§åˆçº¦çš„äº¤æ˜“ä»£ç ï¼ˆå¦‚ "IF", "CU"ï¼‰ã€‚
    -   `commission` (float): æ‰‹ç»­è´¹ã€‚å¯æŒ‰å›ºå®šé‡‘é¢ï¼ˆå¦‚ `2.0` ä»£è¡¨2å…ƒ/æ‰‹ï¼‰æˆ–æŒ‰æ¯”ä¾‹ï¼ˆå¦‚ `0.00004` ä»£è¡¨ä¸‡åˆ†ä¹‹0.4ï¼‰è®¾ç½®ã€‚
-   **è¿”å›ž**: `None`ã€‚

### `set_margin_rate()` - è®¾ç½®ä¿è¯é‡‘æ¯”ä¾‹

-   **ä½¿ç”¨åœºæ™¯**: å›žæµ‹ã€äº¤æ˜“æ¨¡å—å¯ç”¨ã€‚
-   **æŽ¥å£è¯´æ˜Ž**: æŒ‰äº¤æ˜“ä»£ç è®¾ç½®æœŸè´§çš„ä¿è¯é‡‘æ¯”ä¾‹ã€‚
-   **å‚æ•°**:
    -   `transaction_code` (str): æœŸè´§åˆçº¦çš„äº¤æ˜“ä»£ç ã€‚
    -   `margin_rate` (float): ä¿è¯é‡‘æ¯”ä¾‹ï¼ˆå¦‚ `0.08` ä»£è¡¨8%ï¼‰ã€‚
-   **è¿”å›ž**: `None`ã€‚

---

## æŸ¥è¯¢å‡½æ•°

### `get_margin_rate()` - èŽ·å–ä¿è¯é‡‘æ¯”ä¾‹

-   **ä½¿ç”¨åœºæ™¯**: ä»…å›žæµ‹æ¨¡å—å¯ç”¨ã€‚
-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–ç”¨æˆ·ä¸ºæŸä¸€äº¤æ˜“ä»£ç è®¾ç½®çš„ä¿è¯é‡‘æ¯”ä¾‹ã€‚è‹¥æœªè®¾ç½®ï¼Œåˆ™è¿”å›žäº¤æ˜“æ‰€é»˜è®¤æ¯”ä¾‹ã€‚
-   **å‚æ•°**:
    -   `transaction_code` (str): æœŸè´§åˆçº¦çš„äº¤æ˜“ä»£ç ã€‚
-   **è¿”å›ž**: ä¿è¯é‡‘æ¯”ä¾‹ (float)ã€‚

### `get_instruments()` - èŽ·å–åˆçº¦ä¿¡æ¯

-   **æŽ¥å£è¯´æ˜Ž**: èŽ·å–æŒ‡å®šæœŸè´§åˆçº¦çš„è¯¦ç»†ä¿¡æ¯ã€‚
-   **å‚æ•°**:
    -   `contract` (str): æœŸè´§åˆçº¦ä»£ç ã€‚
-   **è¿”å›ž**: `FutureParams` å¯¹è±¡ï¼ŒåŒ…å« `contract_code`, `contract_name`, `exchange`, `trade_unit`, `contract_multiplier`, `delivery_date`, `listing_date`, `trade_code`, `margin_rate` ç­‰å­—æ®µã€‚

---

## æ³¨æ„äº‹é¡¹

1.  **ä»·æ ¼ç²¾åº¦**: ä¸åŒæœŸè´§å“ç§çš„æœ€å°ä»·æ ¼å˜åŠ¨å•ä½ï¼ˆtick sizeï¼‰ä¸åŒï¼Œè¿›è¡Œé™ä»·å§”æ‰˜æ—¶éœ€ç‰¹åˆ«æ³¨æ„ã€‚
2.  **ä¿è¯é‡‘**: æœŸè´§äº¤æ˜“é‡‡ç”¨ä¿è¯é‡‘åˆ¶åº¦ï¼Œè¯·ç¡®ä¿è´¦æˆ·èµ„é‡‘å……è¶³ï¼Œå¹¶å¯†åˆ‡å…³æ³¨ä¿è¯é‡‘æ°´å¹³ä»¥é˜²èŒƒå¼ºå¹³é£Žé™©ã€‚
3.  **åˆçº¦åˆ°æœŸ**: æœŸè´§åˆçº¦æœ‰äº¤å‰²æ—¥æœŸï¼Œéœ€åœ¨åˆ°æœŸå‰åŠæ—¶ç§»ä»“æˆ–å¹³ä»“ã€‚
4.  **æ‰‹ç»­è´¹**: æœŸè´§äº¤æ˜“çš„åŒè¾¹æ‰‹ç»­è´¹ï¼ˆå¼€ä»“å’Œå¹³ä»“ï¼‰æ˜¯é‡è¦çš„äº¤æ˜“æˆæœ¬ï¼Œåº”åœ¨ç­–ç•¥ä¸­äºˆä»¥è€ƒè™‘ã€‚

---

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [**è‚¡ç¥¨äº¤æ˜“API**](stock-trading.md) - çŽ°è´§äº¤æ˜“æŽ¥å£ï¼Œäº†è§£åŸºç¡€äº¤æ˜“æ¦‚å¿µ
- [**æœŸæƒäº¤æ˜“API**](options.md) - æœŸæƒåˆçº¦äº¤æ˜“æŽ¥å£
- [**è¡Œæƒ…æ•°æ®API**](market-data.md) - èŽ·å–æœŸè´§ä»·æ ¼å’ŒKçº¿æ•°æ®
- [**æ•°æ®å¯¹è±¡å®šä¹‰**](objects.md) - Positionã€Orderç­‰å¯¹è±¡åœ¨æœŸè´§äº¤æ˜“ä¸­çš„ç‰¹æ®Šå­—æ®µ
- [**ç­–ç•¥ç¤ºä¾‹**](../examples.md) - åŒ…å«æœŸè´§äº¤æ˜“çš„ç­–ç•¥ç¤ºä¾‹

> ðŸ”™ **è¿”å›ž**: [APIæ–‡æ¡£ä¸»é¡µ](README.md) | [å®Œæ•´APIåˆ†ç±»](../api-classification.md)
